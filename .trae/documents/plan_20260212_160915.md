# 修复Supabase变量重复声明问题

## 问题分析

根据错误信息 `Uncaught SyntaxError: Identifier 'supabase' has already been declared`，问题出在 `supabase` 变量被重复声明。

### 可能的原因
1. **Supabase客户端库冲突**：引入的Supabase客户端库可能在全局作用域中已经声明了 `supabase` 变量
2. **代码重复**：JavaScript代码中可能有其他地方重复声明了 `supabase` 变量
3. **作用域问题**：变量声明在不适当的作用域中

## 解决方案

### 1. 修改Supabase客户端初始化

将 `createClient` 调用改为使用 `supabase` 对象的方法，确保不会与全局变量冲突：

```javascript
// Supabase配置
const supabaseUrl = 'https://nxvcwyufmbpciccgjief.supabase.co';
const supabaseKey = 'sb_publishable_AeEezx7Vi-S_eh7l4Vqh2w_dfhr-Ovh';

// 正确初始化Supabase客户端
let supabase;
try {
  // 尝试使用默认方法
  supabase = createClient(supabaseUrl, supabaseKey);
} catch (e) {
  // 如果失败，尝试使用全局supabase对象
  supabase = supabase.createClient(supabaseUrl, supabaseKey);
}
```

### 2. 检查并修复其他可能的问题

- **移除重复声明**：确保代码中没有其他地方重复声明 `supabase` 变量
- **清理全局作用域**：避免在全局作用域中声明可能与库冲突的变量
- **错误处理**：添加适当的错误处理，确保即使初始化失败也能提供有意义的错误信息

### 3. 测试验证

修复后，测试以下功能：
- 登录/注册功能
- 游戏大厅加载
- 邀请功能
- 实时游戏同步

## 预期结果

- 消除 `Uncaught SyntaxError: Identifier 'supabase' has already been declared` 错误
- 成功初始化Supabase客户端
- 所有联机功能正常工作
- 移动端适配良好

此修复将确保曜弈棋联机版能够正常运行，用户可以通过邀请机制与好友进行对战。