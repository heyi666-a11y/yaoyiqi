## 问题分析
当前的实时监听机制存在问题，导致邀请方在被邀请方接受邀请后没有自动进入游戏。具体原因可能是：

1. 监听通道创建时机不正确：只在进入大厅时创建，可能存在创建失败或被覆盖的情况
2. 监听范围有限：只监听了作为创建者的游戏，没有考虑其他可能的场景
3. 事件处理逻辑可能存在问题：没有正确捕获或处理游戏状态变化事件

## 解决方案
1. **修改监听通道的创建时机**：在用户登录后立即创建全局监听通道，确保始终处于活跃状态
2. **扩大监听范围**：监听所有与当前用户相关的游戏状态变化
3. **优化事件处理逻辑**：确保正确捕获游戏状态变为"active"的事件
4. **添加日志和错误处理**：便于调试和确保功能可靠性

## 具体修改
1. 在登录成功后创建全局游戏状态监听通道
2. 监听`games`表中所有与当前用户相关的记录（无论是创建者还是被邀请者）
3. 当检测到游戏状态变为"active"时，自动将用户带入游戏
4. 在退出登录时正确关闭监听通道
5. 添加适当的日志输出，便于调试

这样，当被邀请方接受邀请后，邀请方的监听通道会立即捕获到游戏状态的变化，并自动进入游戏，实现完整的实时邀请和进入游戏流程。